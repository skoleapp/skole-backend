schema {
  query: Query
  mutation: Mutation
}

type ActivityObjectType {
  id: ID!
  targetUser: UserObjectType
  comment: CommentObjectType
  read: Boolean
  description: String
}

type AuthorObjectType {
  id: ID!
  name: String!
  user: UserObjectType
}

type BadgeObjectType {
  id: ID!
  tier: BadgeTier!
  name: String!
  description: String!
}

type BadgeProgressObjectType {
  badge: BadgeObjectType!
  progress: Int!
  steps: Int
}

enum BadgeTier {
  DIAMOND
  GOLD
  SILVER
  BRONZE
}

input ChangePasswordMutationInput {
  oldPassword: String!
  newPassword: String!
  clientMutationId: String
}

type ChangePasswordMutationPayload {
  successMessage: String
  errors: [ErrorType]
  clientMutationId: String
}

type CityObjectType {
  slug: String
  name: String
}

type CommentObjectType {
  id: ID!
  user: UserObjectType
  text: String!
  attachment: String!
  course: CourseObjectType
  resource: ResourceObjectType
  comment: CommentObjectType
  school: SchoolObjectType
  modified: DateTime!
  created: DateTime!
  replyComments: [CommentObjectType!]!
  score: Int
  vote: VoteObjectType
  replyCount: Int
  attachmentThumbnail: String
}

input ContactMutationInput {
  subject: String
  name: String
  email: String
  message: String!
  clientMutationId: String
}

type ContactMutationPayload {
  subject: String
  name: String
  email: String
  message: String!
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

type CountryObjectType {
  slug: String
  name: String
}

type CourseObjectType {
  id: ID!
  name: String!
  codes: String!
  slug: String
  subjects: [SubjectObjectType!]!
  school: SchoolObjectType!
  user: UserObjectType
  modified: DateTime!
  created: DateTime!
  comments: [CommentObjectType!]!
  resources: [ResourceObjectType!]!
  starred: Boolean
  score: Int
  vote: VoteObjectType
  starCount: Int
  resourceCount: Int
  commentCount: Int
}

input CreateCommentMutationInput {
  user: ID
  text: String
  attachment: String
  course: ID
  resource: ID
  comment: ID
  school: ID
  clientMutationId: String
}

type CreateCommentMutationPayload {
  comment: CommentObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input CreateCourseMutationInput {
  name: String!
  codes: String
  subjects: [ID]
  school: ID!
  clientMutationId: String
}

type CreateCourseMutationPayload {
  course: CourseObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input CreateEmailSubscriptionMutationInput {
  email: String!
  clientMutationId: String
}

type CreateEmailSubscriptionMutationPayload {
  email: String!
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input CreateResourceMutationInput {
  title: String!
  file: String!
  resourceType: ID!
  course: ID!
  date: Date
  author: String
  clientMutationId: String
}

type CreateResourceMutationPayload {
  resource: ResourceObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

scalar Date

scalar DateTime

input DeleteCommentMutationInput {
  id: ID
  clientMutationId: String
}

type DeleteCommentMutationPayload {
  successMessage: String
  errors: [ErrorType]
  clientMutationId: String
}

input DeleteCourseMutationInput {
  id: ID
  clientMutationId: String
}

type DeleteCourseMutationPayload {
  successMessage: String
  errors: [ErrorType]
  clientMutationId: String
}

input DeleteResourceMutationInput {
  id: ID
  clientMutationId: String
}

type DeleteResourceMutationPayload {
  successMessage: String
  errors: [ErrorType]
  clientMutationId: String
}

input DeleteUserMutationInput {
  password: String!
  clientMutationId: String
}

type DeleteUserMutationPayload {
  successMessage: String
  errors: [ErrorType]
  clientMutationId: String
}

union DiscussionsUnion = CourseObjectType | ResourceObjectType | SchoolObjectType

input DownloadResourceMutationInput {
  id: ID
  clientMutationId: String
}

type DownloadResourceMutationPayload {
  resource: ResourceObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

type EmailSubscriptionObjectType {
  email: String!
  productUpdates: Boolean!
  blogPosts: Boolean!
}

type ErrorType {
  field: String!
  messages: [String!]!
}

input LoginMutationInput {
  usernameOrEmail: String!
  password: String!
  clientMutationId: String
}

type LoginMutationPayload {
  user: UserObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

type LogoutMutation {
  deleted: Boolean!
}

input MarkActivityAsReadMutationInput {
  read: Boolean
  id: ID
  clientMutationId: String
}

type MarkActivityAsReadMutationPayload {
  activity: ActivityObjectType
  errors: [ErrorType]
  clientMutationId: String
}

type MarkAllActivitiesAsReadMutation {
  errors: [ErrorType]
  activities: PaginatedActivityObjectType
}

type Mutation {
  star(input: StarMutationInput!): StarMutationPayload
  vote(input: VoteMutationInput!): VoteMutationPayload
  register(input: RegisterMutationInput!): RegisterMutationPayload
  verifyAccount(input: VerifyAccountMutationInput!): VerifyAccountMutationPayload
  resendVerificationEmail: ResendVerificationEmailMutation
  sendPasswordResetEmail(input: SendPasswordResetEmailMutationInput!): SendPasswordResetEmailMutationPayload
  resetPassword(input: ResetPasswordMutationInput!): ResetPasswordMutationPayload
  login(input: LoginMutationInput!): LoginMutationPayload
  logout: LogoutMutation
  changePassword(input: ChangePasswordMutationInput!): ChangePasswordMutationPayload
  updateProfile(input: UpdateProfileMutationInput!): UpdateProfileMutationPayload
  updateAccountSettings(input: UpdateAccountSettingsMutationInput!): UpdateAccountSettingsMutationPayload
  deleteUser(input: DeleteUserMutationInput!): DeleteUserMutationPayload
  updateSelectedBadge(input: UpdateSelectedBadgeMutationInput!): UpdateSelectedBadgeMutationPayload
  registerFcmToken(input: RegisterFCMTokenMutationInput!): RegisterFCMTokenMutationPayload
  createResource(input: CreateResourceMutationInput!): CreateResourceMutationPayload
  updateResource(input: UpdateResourceMutationInput!): UpdateResourceMutationPayload
  deleteResource(input: DeleteResourceMutationInput!): DeleteResourceMutationPayload
  downloadResource(input: DownloadResourceMutationInput!): DownloadResourceMutationPayload
  myData: MyDataMutation
  createEmailSubscription(input: CreateEmailSubscriptionMutationInput!): CreateEmailSubscriptionMutationPayload
  updateEmailSubscription(input: UpdateEmailSubscriptionMutationInput!): UpdateEmailSubscriptionMutationPayload
  createCourse(input: CreateCourseMutationInput!): CreateCourseMutationPayload
  deleteCourse(input: DeleteCourseMutationInput!): DeleteCourseMutationPayload
  createContactMessage(input: ContactMutationInput!): ContactMutationPayload
  createComment(input: CreateCommentMutationInput!): CreateCommentMutationPayload
  updateComment(input: UpdateCommentMutationInput!): UpdateCommentMutationPayload
  deleteComment(input: DeleteCommentMutationInput!): DeleteCommentMutationPayload
  markActivityAsRead(input: MarkActivityAsReadMutationInput!): MarkActivityAsReadMutationPayload
  markAllActivitiesAsRead: MarkAllActivitiesAsReadMutation
}

type MyDataMutation {
  successMessage: String
  errors: [ErrorType]
}

type PaginatedActivityObjectType {
  page: Int
  pages: Int
  hasNext: Boolean
  hasPrev: Boolean
  count: Int
  objects: [ActivityObjectType]
}

type PaginatedCommentObjectType {
  page: Int
  pages: Int
  hasNext: Boolean
  hasPrev: Boolean
  count: Int
  objects: [CommentObjectType]
}

type PaginatedCourseObjectType {
  page: Int
  pages: Int
  hasNext: Boolean
  hasPrev: Boolean
  count: Int
  objects: [CourseObjectType]
}

type PaginatedResourceObjectType {
  page: Int
  pages: Int
  hasNext: Boolean
  hasPrev: Boolean
  count: Int
  objects: [ResourceObjectType]
}

type PaginatedSubjectObjectType {
  page: Int
  pages: Int
  hasNext: Boolean
  hasPrev: Boolean
  count: Int
  objects: [SubjectObjectType]
}

type Query {
  badges: [BadgeObjectType]
  comments(user: String, page: Int, pageSize: Int): PaginatedCommentObjectType
  discussion(course: ID, resource: ID, school: ID): [CommentObjectType]
  discussionSuggestions: [DiscussionsUnion]
  suggestions: [SuggestionsUnion]
  suggestionsPreview: [SuggestionsUnion]
  userMe: UserObjectType
  user(slug: String): UserObjectType
  subjects(school: String, page: Int, pageSize: Int): PaginatedSubjectObjectType
  autocompleteSubjects(name: String): [SubjectObjectType]
  subject(slug: String): SubjectObjectType
  sitemap: SitemapObjectType
  autocompleteSchoolTypes: [SchoolTypeObjectType]
  schoolType(slug: String): SchoolTypeObjectType
  autocompleteSchools(name: String): [SchoolObjectType]
  school(slug: String): SchoolObjectType
  resourceTypes: [ResourceTypeObjectType]
  autocompleteResourceTypes: [ResourceTypeObjectType]
  resources(user: String, course: String, page: Int, pageSize: Int, ordering: String): PaginatedResourceObjectType
  starredResources(page: Int, pageSize: Int): PaginatedResourceObjectType
  resource(slug: String): ResourceObjectType
  emailSubscription(token: String): EmailSubscriptionObjectType
  courses(searchTerm: String, subject: String, school: String, schoolType: String, country: String, city: String, user: String, page: Int, pageSize: Int, ordering: String): PaginatedCourseObjectType
  autocompleteCourses(school: String, name: String): [CourseObjectType]
  starredCourses(page: Int, pageSize: Int): PaginatedCourseObjectType
  course(slug: String): CourseObjectType
  autocompleteCountries: [CountryObjectType]
  country(slug: String): CountryObjectType
  autocompleteCities: [CityObjectType]
  city(slug: String): CityObjectType
  activities(page: Int, pageSize: Int): PaginatedActivityObjectType
  activityPreview: [ActivityObjectType]
}

input RegisterFCMTokenMutationInput {
  token: String
  clientMutationId: String
}

type RegisterFCMTokenMutationPayload {
  token: String
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input RegisterMutationInput {
  username: String!
  email: String!
  password: String!
  clientMutationId: String
}

type RegisterMutationPayload {
  successMessage: String
  errors: [ErrorType]
  clientMutationId: String
}

type ResendVerificationEmailMutation {
  successMessage: String
  errors: [ErrorType]
}

input ResetPasswordMutationInput {
  token: String
  newPassword: String!
  clientMutationId: String
}

type ResetPasswordMutationPayload {
  token: String
  newPassword: String!
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

type ResourceObjectType {
  id: ID!
  slug: String
  resourceType: ResourceTypeObjectType
  title: String!
  date: Date!
  file: String!
  course: CourseObjectType!
  downloads: Int!
  user: UserObjectType
  author: AuthorObjectType
  modified: DateTime!
  created: DateTime!
  comments: [CommentObjectType!]!
  starred: Boolean
  score: Int
  vote: VoteObjectType
  school: SchoolObjectType
  starCount: Int
  commentCount: Int
}

type ResourceTypeObjectType {
  id: ID!
  slug: String
  name: String
}

type SchoolObjectType {
  id: ID!
  slug: String
  schoolType: SchoolTypeObjectType
  city: CityObjectType
  courses: [CourseObjectType!]!
  name: String
  country: CountryObjectType
  subjects: [SubjectObjectType]
  commentCount: Int
}

type SchoolTypeObjectType {
  slug: String
  name: String
}

input SendPasswordResetEmailMutationInput {
  email: String!
  clientMutationId: String
}

type SendPasswordResetEmailMutationPayload {
  email: String!
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

type SitemapEntryObjectType {
  slug: String
  modified: Date
}

type SitemapObjectType {
  courses: [SitemapEntryObjectType!]!
  resources: [SitemapEntryObjectType!]!
  schools: [SitemapEntryObjectType!]!
  users: [SitemapEntryObjectType!]!
}

input StarMutationInput {
  course: ID
  resource: ID
  clientMutationId: String
}

type StarMutationPayload {
  star: StarObjectType
  errors: [ErrorType]
  starred: Boolean
  clientMutationId: String
}

type StarObjectType {
  id: ID!
  user: UserObjectType!
  course: CourseObjectType
  resource: ResourceObjectType
}

type SubjectObjectType {
  id: ID!
  slug: String
  name: String
  courseCount: Int
  resourceCount: Int
}

union SuggestionsUnion = CourseObjectType | ResourceObjectType | CommentObjectType

input UpdateAccountSettingsMutationInput {
  email: String!
  school: ID
  subject: ID
  productUpdateEmailPermission: Boolean
  blogPostEmailPermission: Boolean
  commentReplyEmailPermission: Boolean
  courseCommentEmailPermission: Boolean
  resourceCommentEmailPermission: Boolean
  commentReplyPushPermission: Boolean
  courseCommentPushPermission: Boolean
  resourceCommentPushPermission: Boolean
  clientMutationId: String
}

type UpdateAccountSettingsMutationPayload {
  user: UserObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input UpdateCommentMutationInput {
  text: String
  attachment: String
  id: ID
  clientMutationId: String
}

type UpdateCommentMutationPayload {
  comment: CommentObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input UpdateEmailSubscriptionMutationInput {
  productUpdates: Boolean
  blogPosts: Boolean
  token: String
  clientMutationId: String
}

type UpdateEmailSubscriptionMutationPayload {
  emailSubscription: EmailSubscriptionObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input UpdateProfileMutationInput {
  username: String!
  title: String
  bio: String
  avatar: String
  clientMutationId: String
}

type UpdateProfileMutationPayload {
  user: UserObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input UpdateResourceMutationInput {
  title: String!
  resourceType: ID!
  date: Date
  author: String
  id: ID
  clientMutationId: String
}

type UpdateResourceMutationPayload {
  resource: ResourceObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input UpdateSelectedBadgeMutationInput {
  id: ID
  clientMutationId: String
}

type UpdateSelectedBadgeMutationPayload {
  badgeProgress: BadgeProgressObjectType
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

type UserObjectType {
  id: ID!
  slug: String
  username: String!
  email: String
  title: String!
  bio: String!
  avatar: String
  selectedBadgeProgress: BadgeProgressObjectType
  score: Int
  created: DateTime!
  verified: Boolean
  productUpdateEmailPermission: Boolean
  blogPostEmailPermission: Boolean
  commentReplyEmailPermission: Boolean
  courseCommentEmailPermission: Boolean
  resourceCommentEmailPermission: Boolean
  commentReplyPushPermission: Boolean
  courseCommentPushPermission: Boolean
  resourceCommentPushPermission: Boolean
  avatarThumbnail: String
  school: SchoolObjectType
  subject: SubjectObjectType
  rank: String
  badges: [BadgeObjectType]
  badgeProgresses: [BadgeProgressObjectType]
  unreadActivityCount: Int
  fcmToken: String
}

input VerifyAccountMutationInput {
  token: String
  clientMutationId: String
}

type VerifyAccountMutationPayload {
  token: String
  errors: [ErrorType]
  successMessage: String
  clientMutationId: String
}

input VoteMutationInput {
  status: Int!
  comment: ID
  course: ID
  resource: ID
  clientMutationId: String
}

type VoteMutationPayload {
  vote: VoteObjectType
  errors: [ErrorType]
  targetScore: Int
  clientMutationId: String
}

type VoteObjectType {
  id: ID!
  user: UserObjectType
  status: Int
  comment: CommentObjectType
  course: CourseObjectType
  resource: ResourceObjectType
}
